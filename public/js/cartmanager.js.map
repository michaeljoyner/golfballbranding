{"version":3,"sources":["cartmanager.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cartmanager.js","sourcesContent":["var cartManager = {\n\n    cart: null,\n\n    init: function() {\n        this.setDirty();\n        var buttons = document.querySelectorAll('.product-btn');\n\n        for(var i = 0; i < buttons.length; i++) {\n            buttons[i].addEventListener('click', cartManager.addItemToCart, false);\n        }\n\n        window.addEventListener('scroll', cartManager.handleScroll, false);\n\n        cartManager.cart = new Cart(document.getElementById('thecart'));\n        cartManager.cart.syncCart(this.syncButtons.bind(this));\n    },\n\n    handleScroll: function(ev) {\n        var cart = document.getElementById('thecart');\n        if(document.body.scrollTop > 400) {\n            cart.className = 'fixit';\n        } else {\n            cart.className = '';\n        }\n    },\n\n    setDirty: function() {\n        var dirt = document.getElementById('dirty-bit');\n        dirt.value = 1;\n        console.log('setting dirt');\n    },\n\n    addItemToCart: function(ev) {\n        var button = ev.target;\n\n        if(button.className === 'button product product-btn added') {\n            return;\n        }\n        var buttonId = button.getAttribute('data-product-id');\n\n        button.innerHTML = 'Adding...';\n\n        var added = function() {\n            button.innerHTML = 'In Your Cart';\n            button.className = 'button product product-btn added';\n        }\n\n        var failed = function() {\n            button.innerHTML = 'Add to Cart';\n            alert('Failed to add to cart');\n        }\n        cartManager.cart.requestAddition(buttonId, added, failed);\n    },\n\n    syncButtons: function(idList) {\n        var id;\n        var buttons = document.querySelectorAll('.product-btn');\n        _.times(buttons.length, function(i) {\n            id = parseInt(buttons[i].id.substr(4));\n            if(_.indexOf(idList, id) !== -1) {\n                buttons[i].className = 'button product product-btn added';\n                buttons[i].innerHTML = 'In Your Cart';\n            } else {\n                buttons[i].className = 'button product product-btn';\n                buttons[i].innerHTML = 'Add Product';\n            }\n        });\n    }\n}"],"sourceRoot":"/source/"}